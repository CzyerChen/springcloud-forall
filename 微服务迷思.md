> 今天看到一个关于架构的提问，问一个适用于全球网民同时使用，每天的早上，中午，晚上闲暇时间会尝试去访问的系统，可能会点赞、评论，该如何设计

> 也跟随着这个思路，来看一下思考的流程

### 确定系统访问的压力
- 全球人数大约40E
- 早上、中午、晚上，零碎时间进行拼凑，平均30min
- 如果每人每30min就有1次点赞或者评论，入数据库
- 估算QPS：1 Q / 30min * 40E = 2 Q/h * 40E ≈ 222w Q/s
- 承压能力：一般在QPS的1.25倍到1.5倍较为合理，因而设为300w Q/s

### 确定数据库
- 如果是MySQL，1W/s的性能，需要300台，还不考虑集群间的同步和协调监控
- 如果是HBASE，有较大的吞吐量，1000线程，单机可以有8W/s的写入，因而10个HBase集群，每个集群4HBase，1Zookeeper。共50台机存储
- 消息队列：Kafka，100w/s单台 ，一个集群，保证300W的吞吐，三台的集群，加上一个观察者节点，查看kafka的消费情况
- 分布式的业务系统，做好接口的把控

### 确定分布式应用架构
- springcloud
- istio
- dubbo
- 关于分布式架构我们可以稍后再说
